var EXT_ID="pageedit",port=chrome.extension.connect();function toggleEditor(e){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",chrome.extension.getURL("js/inject_editor.js")+"#"+(""+Math.random()).split(".")[1]),t.addEventListener("load",function(){postMessage(EXT_ID+"::"+JSON.stringify({toggleEditor:!0,extensionURI:chrome.extension.getURL(""),configScript:chrome.extension.getURL("js/editor_config.js"),scripts:["editor/ckeditor.js"],options:e}),"*")}),document.head.appendChild(t)}let element;port.onMessage.addListener(function(e){toggleEditor(e.options)}),port.postMessage({init:!0});let savePageTrigger=setInterval(()=>{void 0!==(element=document.getElementById("save_page_hidden_trigger"))&&null!=element&&(clearInterval(savePageTrigger),document.getElementById("save_page_hidden_trigger").remove(),chrome.runtime.sendMessage({type:"SAVE_PAGE_BG"},function(e){}))},1e3);